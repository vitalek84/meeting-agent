# Root directory where the built Vite app is located
root /usr/share/nginx/html;
index index.html;

location / {
    # This is the key part for SPAs:
    # First, try to serve the requested file ($uri)
    # If it's a directory, try to serve an index file from it ($uri/)
    # If neither of those work, fall back to serving /index.html
    try_files $uri $uri/ /index.html;
}

# Optional: Configure caching for static assets
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public";
}

